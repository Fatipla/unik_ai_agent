#!/bin/bash

# Unik AI Agent - Paddle Products & Prices Setup Script
# This script helps you set up products and prices in Paddle

echo "ğŸš€ Paddle Setup Guide for Unik AI Agent"
echo "========================================="
echo ""
echo "This script will guide you through setting up Paddle products and prices."
echo ""
echo "âš ï¸  PREREQUISITES:"
echo "   1. Create a Paddle account at https://paddle.com"
echo "   2. Complete your seller profile"
echo "   3. Get your API credentials from Paddle Dashboard â†’ Developer Tools â†’ Authentication"
echo ""
echo "ğŸ“‹ YOU WILL NEED:"
echo "   - Vendor ID"
echo "   - Client ID (formerly Vendor Auth Code)"
echo "   - Client Secret"
echo "   - Webhook Secret (from Paddle Dashboard â†’ Developer Tools â†’ Notifications)"
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "PADDLE PRODUCT STRUCTURE FOR UNIK AI AGENT"
echo ""
echo "We need to create 3 products with 2 prices each (monthly & yearly):"
echo ""
echo "1ï¸âƒ£  STARTER PLAN"
echo "   ğŸ’° Monthly: â‚¬19.99/month"
echo "   ğŸ’° Yearly:  â‚¬167.92/year (30% discount)"
echo "   âœ¨ Features: 500 conversations, Chatbot Widget & API, Knowledge Base"
echo ""
echo "2ï¸âƒ£  PRO PLAN"
echo "   ğŸ’° Monthly: â‚¬29.99/month"
echo "   ğŸ’° Yearly:  â‚¬251.92/year (30% discount)"
echo "   âœ¨ Features: 1,500 conversations, Voice Agent, n8n Integration"
echo ""
echo "3ï¸âƒ£  BUSINESS PLAN"
echo "   ğŸ’° Monthly: â‚¬39.99/month"
echo "   ğŸ’° Yearly:  â‚¬335.92/year (30% discount)"
echo "   âœ¨ Features: Unlimited conversations, Dedicated Support, Custom Integrations"
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "ğŸ“– STEP-BY-STEP INSTRUCTIONS:"
echo ""
echo "Since Paddle doesn't have a CLI tool like Stripe, follow these manual steps:"
echo ""
echo "STEP 1: Login to Paddle Dashboard"
echo "   â†’ Go to https://vendors.paddle.com (or https://sandbox-vendors.paddle.com for testing)"
echo ""
echo "STEP 2: Create Products"
echo "   â†’ Go to Catalog â†’ Products"
echo "   â†’ Click 'Add Product'"
echo "   â†’ For each plan (Starter, Pro, Business):"
echo "     â€¢ Product Name: [Plan Name] - Unik AI Agent"
echo "     â€¢ Description: [Features listed above]"
echo "     â€¢ Tax Category: 'SaaS - Software as a Service'"
echo ""
echo "STEP 3: Create Prices"
echo "   â†’ For each product, add 2 prices:"
echo "     â€¢ Monthly Price:"
echo "       - Billing Type: Subscription"
echo "       - Billing Period: Monthly"
echo "       - Amount: [see amounts above]"
echo "       - Currency: EUR"
echo "       - Trial Period: 7 days"
echo "     â€¢ Yearly Price:"
echo "       - Billing Type: Subscription"
echo "       - Billing Period: Yearly"
echo "       - Amount: [see amounts above]"
echo "       - Currency: EUR"
echo "       - Trial Period: 7 days"
echo ""
echo "STEP 4: Copy Price IDs"
echo "   â†’ After creating each price, copy its Price ID (format: pri_xxxxx)"
echo "   â†’ You'll need 6 price IDs total (3 monthly + 3 yearly)"
echo ""
echo "STEP 5: Set Up Webhook"
echo "   â†’ Go to Developer Tools â†’ Notifications"
echo "   â†’ Add Notification Destination:"
echo "     â€¢ URL: https://your-domain.com/api/webhooks/paddle"
echo "     â€¢ Select all subscription events"
echo "     â€¢ Copy the Webhook Secret"
echo ""
echo "STEP 6: Update .env file"
echo "   â†’ Add these variables to your .env file:"
echo ""
echo "   # Paddle Configuration"
echo "   PADDLE_ENV=sandbox  # or 'live' for production"
echo "   PADDLE_VENDOR_ID=your_vendor_id"
echo "   PADDLE_CLIENT_ID=your_client_id"
echo "   PADDLE_CLIENT_SECRET=your_client_secret"
echo "   PADDLE_WEBHOOK_SECRET=your_webhook_secret"
echo "   PADDLE_ENABLED=true"
echo ""
echo "   # Paddle Price IDs"
echo "   PADDLE_PRICE_STARTER=pri_starter_monthly_id"
echo "   PADDLE_PRICE_PRO=pri_pro_monthly_id"
echo "   PADDLE_PRICE_BUSINESS=pri_business_monthly_id"
echo ""
echo "STEP 7: Seed Database (Optional)"
echo "   â†’ Run the database seed script to populate paddle_prices table:"
echo "   â†’ npm run db:seed"
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "âœ… TESTING YOUR SETUP:"
echo ""
echo "1. Use Paddle Sandbox environment first"
echo "2. Test checkout flow with test card: 4242 4242 4242 4242"
echo "3. Verify webhook events are received"
echo "4. Check subscription status in your dashboard"
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "ğŸ“š HELPFUL RESOURCES:"
echo ""
echo "   â€¢ Paddle API Docs: https://developer.paddle.com"
echo "   â€¢ Subscription Guide: https://developer.paddle.com/concepts/subscriptions"
echo "   â€¢ Webhook Reference: https://developer.paddle.com/webhooks/overview"
echo "   â€¢ Testing Guide: https://developer.paddle.com/concepts/payment-methods/test-cards"
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "ğŸ’¡ QUICK TIPS:"
echo ""
echo "   â€¢ Always test in Sandbox before going live"
echo "   â€¢ Paddle handles VAT/tax automatically for EU customers"
echo "   â€¢ You can offer coupons and discounts through Paddle Dashboard"
echo "   â€¢ Paddle provides hosted checkout - no PCI compliance needed"
echo "   â€¢ Customer portal is built-in for self-service cancellations"
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "ğŸ‰ Once configured, your Paddle integration will be fully functional!"
echo ""
echo "For support, visit: https://paddle.com/support"
echo ""
